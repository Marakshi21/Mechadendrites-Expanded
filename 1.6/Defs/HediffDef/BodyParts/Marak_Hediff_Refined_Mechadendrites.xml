<?xml version="1.0" encoding="utf-8" ?>
<Defs>

    <ThingDef Name="BodyPartRefinedMechadendriteBase" ParentName="BodyPartBase" Abstract="True">
        <techLevel>Industrial</techLevel>
        <thingCategories>
            <li>BodyPartsProsthetic</li>
        </thingCategories>
        <graphicData>
            <texPath>Things/Item/Health/HealthItem</texPath>
            <graphicClass>Graphic_Single</graphicClass>
            <drawSize>0.80</drawSize>
            <color>(154,124,104)</color>
        </graphicData>
        <statBases>
            <WorkToMake>18000</WorkToMake>
        </statBases>
        <recipeMaker>
            <displayPriority>600</displayPriority>
        </recipeMaker>
    </ThingDef>

    <ThingDef Name="BodyPartRefinedMechadendriteMakeableBase" ParentName="BodyPartRefinedMechadendriteBase" Abstract="True">
        <recipeMaker>
            <workSpeedStat>GeneralLaborSpeed</workSpeedStat>
            <workSkill>Crafting</workSkill>
            <effectWorking>Smith</effectWorking>
            <soundWorking>Recipe_Smith</soundWorking>
            <recipeUsers>
                <li>TableMachining</li>
            </recipeUsers>
            <skillRequirements>
                <Crafting>8</Crafting>
            </skillRequirements>
            <unfinishedThingDef>UnfinishedHealthItemProsthetic</unfinishedThingDef>
            <researchPrerequisite>Marak_RefinedMechadendrites</researchPrerequisite>
        </recipeMaker>
    </ThingDef>

    <RecipeDef Name="SurgeryInstallBodyPartRefinedMechadendriteBase" ParentName="SurgeryInstallBodyPartArtificialBase" Abstract="True">
        <skillRequirements>
            <Medicine>8</Medicine>
        </skillRequirements>
    </RecipeDef>
    

    <!-- Refined Mechadendrite -->

    <HediffDef ParentName="AddedBodyPartBase">
        <defName>Marak_RefinedMechadendrite</defName>
        <label>refined mechadendrite</label>
        <labelNoun>a refined mechadendrite</labelNoun>
        <description>An installed refined mechadendrite. The addition of servos and advanced machining allows it to have more flexible movement compared to its basic brethren.</description>
        <descriptionHyperlinks><ThingDef>Marak_RefinedMechadendrite</ThingDef></descriptionHyperlinks>
        <spawnThingOnRemoved>Marak_RefinedMechadendrite</spawnThingOnRemoved>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>
        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Manipulation</capacity>
                        <offset>0.025</offset>
                    </li>
                </capMods>
            </li>
        </stages>
    </HediffDef>

    <ThingDef ParentName="BodyPartRefinedMechadendriteMakeableBase">
        <defName>Marak_RefinedMechadendrite</defName>
        <label>refined mechadendrite</label>
        <description>A refined iteration of the basic mechadendrite. Thanks to better engineering and addition of servos, this mechadendrite can move around more flexibly compared to its predecessor.</description>
        <descriptionHyperlinks><RecipeDef>Marak_InstallRefinedMechadendrite</RecipeDef></descriptionHyperlinks>
        <costList>
            <Steel>15</Steel>
            <ComponentIndustrial>1</ComponentIndustrial>
        </costList>
        <statBases>
            <Mass>1</Mass>
        </statBases>
        <techHediffsTags>
            <li>Simple</li>
        </techHediffsTags>
    </ThingDef>

    <RecipeDef ParentName="SurgeryInstallBodyPartRefinedMechadendriteBase">
        <defName>Marak_InstallRefinedMechadendrite</defName>
        <label>install refined mechadendrite</label>
        <description>Install a refined mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Installing refined mechadendrite.</jobString>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Marak_RefinedMechadendrite</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Marak_RefinedMechadendrite</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Mechadendrite_Slot</li>
        </appliedOnFixedBodyParts>
        <addsHediff>Marak_RefinedMechadendrite</addsHediff>
        <researchPrerequisite>Marak_Mechadendrite_Gateway</researchPrerequisite>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryRemoveImplantBase">
        <defName>Marak_RemoveRefinedMechadendrite</defName>
        <label>remove refined mechadendrite</label>
        <description>Remove a refined mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Removing refined mechadendrite.</jobString>
        <removesHediff>Marak_RefinedMechadendrite</removesHediff>
    </RecipeDef>
    
    <!-- Specialised Refined Mechadendrites -->

    <!-- Melee/Combat Mechadendrite -->
    <HediffDef ParentName="AddedBodyPartBase">
        <defName>Marak_RefinedCombatMechadendrite</defName>
        <label>refined bladed mechadendrite</label>
        <labelNoun>a refined bladed mechadendrite</labelNoun>
        <description>An installed refined bladed mechadendrite. Its bladed tip gives it the ability to pierce while the mechadendrite itself strikes targets based on the wielder's intuition</description>
        <descriptionHyperlinks><ThingDef>Marak_RefinedCombatMechadendrite</ThingDef></descriptionHyperlinks>
        <spawnThingOnRemoved>Marak_RefinedCombatMechadendrite</spawnThingOnRemoved>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>
        <!-- <stages>
            <li>
                <statOffsets>
                    <MeleeArmorPenetration>.0125</MeleeArmorPenetration>
                    <MeleeCooldownFactor>-.015</MeleeCooldownFactor>
                    <MeleeDamageFactor>0.0125</MeleeDamageFactor>
                </statOffsets>
            </li>
        </stages> -->
        <comps>
            <li Class="HediffCompProperties_VerbGiver">
                <tools>
                    <li>
                        <label>blade</label>
                        <capacities>
                            <li>Stab</li>
                        </capacities>
                        <power>6</power>
                        <armorPenetration>0.25</armorPenetration> <!-- Pierce deep but do little damage -->
                        <cooldownTime>2.0</cooldownTime>
                        <alwaysTreatAsWeapon>true</alwaysTreatAsWeapon>
                        <soundMeleeHit>MeleeHit_BionicSlash</soundMeleeHit>
                        <soundMeleeMiss>MeleeMiss_BionicSlash</soundMeleeMiss>
                    </li>
                </tools>
            </li>
        </comps>
    </HediffDef>

    <ThingDef ParentName="BodyPartRefinedMechadendriteMakeableBase">
        <defName>Marak_RefinedCombatMechadendrite</defName>
        <label>refined bladed mechadendrite</label>
        <description>A mechadendrite ordained with a sharp blade at its tip. Its semi-flexible construction allows it to swing around madly aiming to strike targets based on the wielder's intuition of who is foe and friend.</description>
        <descriptionHyperlinks><RecipeDef>Marak_InstallRefinedCombatMechadendrite</RecipeDef></descriptionHyperlinks>
        <costList>
            <Steel>25</Steel>
            <ComponentIndustrial>2</ComponentIndustrial>
        </costList>
        <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
        <recipeMaker>
            <researchPrerequisite>Marak_RefinedCombatMechadendrite</researchPrerequisite>
        </recipeMaker>
        <statBases>
            <Mass>1.5</Mass>
        </statBases>
        <techHediffsTags>
            <li>AdvancedWeapon</li>
        </techHediffsTags>
        <violentTechHediff>true</violentTechHediff>
    </ThingDef>

    <RecipeDef ParentName="SurgeryInstallBodyPartRefinedMechadendriteBase">
        <defName>Marak_InstallRefinedCombatMechadendrite</defName>
        <label>install refined bladed mechadendrite</label>
        <description>Install a refined bladed mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedCombatMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedCombatMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Installing refined bladed mechadendrite.</jobString>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Marak_RefinedCombatMechadendrite</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Marak_RefinedCombatMechadendrite</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Mechadendrite_Slot</li>
        </appliedOnFixedBodyParts>
        <addsHediff>Marak_RefinedCombatMechadendrite</addsHediff>
        <researchPrerequisite>Marak_Mechadendrite_Gateway</researchPrerequisite>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryRemoveImplantBase">
        <defName>Marak_RemoveRefinedCombatMechadendrite</defName>
        <label>remove refined bladed mechadendrite</label>
        <description>Remove a refined bladed Mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedCombatMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedCombatMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Removing refined bladed mechadendrite.</jobString>
        <removesHediff>Marak_RefinedCombatMechadendrite</removesHediff>
    </RecipeDef>

    <!-- Drill Mechadendrite -->
    <HediffDef ParentName="AddedBodyPartBase">
        <defName>Marak_RefinedExcavatorMechadendrite</defName>
        <label>refined excavator mechadendrite</label>
        <labelNoun>a refined excavator mechadendrite</labelNoun>
        <description>An installed refined excavator mechadendrite. Based on the bladed mechadendrite, the excavator mechadendrite can use its bladed head to pry in deep and excavate materials.</description>
        <descriptionHyperlinks><ThingDef>Marak_RefinedExcavatorMechadendrite</ThingDef></descriptionHyperlinks>
        <spawnThingOnRemoved>Marak_RefinedExcavatorMechadendrite</spawnThingOnRemoved>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>
        <stages>
            <li>
                <statOffsets>
                    <MiningSpeed>.04</MiningSpeed>
                 </statOffsets>
             </li>
         </stages>
     </HediffDef>
 
     <ThingDef ParentName="BodyPartRefinedMechadendriteMakeableBase">
         <defName>Marak_RefinedExcavatorMechadendrite</defName>
         <label>refined excavator mechadendrite</label>
        <description>A refined mechadendrite that utilizes a sharp blade for a head similar to the one found on the bladed mechadendrite designed for use in excavating operations instead of combat. Due to its bladed nature, it has limited applications in excavating.</description>
        <descriptionHyperlinks><RecipeDef>Marak_InstallRefinedExcavatorMechadendrite</RecipeDef></descriptionHyperlinks>
        <costList>
            <Steel>25</Steel>
            <ComponentIndustrial>2</ComponentIndustrial>
        </costList>
        <recipeMaker>
            <researchPrerequisite>Marak_RefinedCombatMechadendrite</researchPrerequisite>
        </recipeMaker> 
        <statBases>
            <Mass>1.5</Mass>
        </statBases>
        <techHediffsTags>
            <li>Simple</li>
        </techHediffsTags>
    </ThingDef>

    <RecipeDef ParentName="SurgeryInstallBodyPartRefinedMechadendriteBase">
        <defName>Marak_InstallRefinedExcavatorMechadendrite</defName>
        <label>install refined Excavator mechadendrite</label>
        <description>Install a refined excavator mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedExcavatorMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedExcavatorMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Installing refined excavator mechadendrite.</jobString>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Marak_RefinedExcavatorMechadendrite</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Marak_RefinedExcavatorMechadendrite</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Mechadendrite_Slot</li>
        </appliedOnFixedBodyParts>
        <addsHediff>Marak_RefinedExcavatorMechadendrite</addsHediff>
        <researchPrerequisite>Marak_Mechadendrite_Gateway</researchPrerequisite>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryRemoveImplantBase">
        <defName>Marak_RemoveRefinedExcavatorMechadendrite</defName>
        <label>remove refined excavator mechadendrite</label>
        <description>Remove a refined excavator mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedExcavatorMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedExcavatorMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Removing refined excavator mechadendrite.</jobString>
        <removesHediff>Marak_RefinedExcavatorMechadendrite</removesHediff>
    </RecipeDef>
    
    <!-- Multitool Mechadendrite -->
    <HediffDef ParentName="AddedBodyPartBase">
        <defName>Marak_RefinedMultitoolMechadendrite</defName>
        <label>refined multitool mechadendrite</label>
        <labelNoun>a refined multitool mechadendrite</labelNoun>
        <description>An installed refined multitool mechadendrite.</description>
        <descriptionHyperlinks><ThingDef>Marak_RefinedMultitoolMechadendrite</ThingDef></descriptionHyperlinks>
        <spawnThingOnRemoved>Marak_RefinedMultitoolMechadendrite</spawnThingOnRemoved>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>
        <stages>
            <li>
                <statOffsets>
                    <GeneralLaborSpeed>.05</GeneralLaborSpeed>
                    <SmoothingSpeed>.05</SmoothingSpeed>
                    <ConstructionSpeed>.05</ConstructionSpeed>
                    <SmeltingSpeed>.05</SmeltingSpeed>
                    <ButcheryMechanoidSpeed>.05</ButcheryMechanoidSpeed>
                </statOffsets>
            </li>
        </stages>
    </HediffDef>

    <ThingDef ParentName="BodyPartRefinedMechadendriteMakeableBase">
        <defName>Marak_RefinedMultitoolMechadendrite</defName>
        <label>refined multitool mechadendrite</label>
        <description>A refined mechadendrite with an array of tools scattered across the tendril-like form. Designed for use in menial work, it sacrifices generalisation in favour of boosting more menial types of work.</description>
        <descriptionHyperlinks><RecipeDef>Marak_InstallRefinedMultitoolMechadendrite</RecipeDef></descriptionHyperlinks>
        <costList>
            <Steel>25</Steel>
            <ComponentIndustrial>2</ComponentIndustrial>
        </costList>
        <thingSetMakerTags><li>RewardStandardMidFreq</li></thingSetMakerTags>
        <recipeMaker>
            <researchPrerequisite>Marak_RefinedMultitoolMechadendrite</researchPrerequisite>
        </recipeMaker>
        <statBases>
            <Mass>1.5</Mass>
        </statBases>
        <techHediffsTags>
            <li>Simple</li>
        </techHediffsTags>
    </ThingDef>

    <RecipeDef ParentName="SurgeryInstallBodyPartRefinedMechadendriteBase">
        <defName>Marak_InstallRefinedMultitoolMechadendrite</defName>
        <label>install refined multitool mechadendrite</label>
        <description>Install a refined multitool mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedMultitoolMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedMultitoolMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Installing refined multitool mechadendrite.</jobString>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Marak_RefinedMultitoolMechadendrite</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Marak_RefinedMultitoolMechadendrite</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Mechadendrite_Slot</li>
        </appliedOnFixedBodyParts>
        <addsHediff>Marak_RefinedMultitoolMechadendrite</addsHediff>
        <researchPrerequisite>Marak_Mechadendrite_Gateway</researchPrerequisite>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryRemoveImplantBase">
        <defName>Marak_RemoveRefinedMultitoolMechadendrite</defName>
        <label>remove refined multitool mechadendrite</label>
        <description>Remove a refined multitool mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedMultitoolMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedMultitoolMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Removing refined multitool mechadendrite.</jobString>
        <removesHediff>Marak_RefinedMultitoolMechadendrite</removesHediff>
    </RecipeDef>

    <!-- Flashlight Mechadendrite -->
    <HediffDef ParentName="AddedBodyPartBase">
        <defName>Marak_RefinedOpticalMechadendrite</defName>
        <label>refined flashlight mechadendrite</label>
        <labelNoun>a refined flashlight mechadendrite</labelNoun>
        <description>An installed refined flashlight mechadendrite.</description>
        <descriptionHyperlinks><ThingDef>Marak_RefinedOpticalMechadendrite</ThingDef></descriptionHyperlinks>
        <spawnThingOnRemoved>Marak_RefinedOpticalMechadendrite</spawnThingOnRemoved>
        <addedPartProps>
            <solid>true</solid>
        </addedPartProps>
        <stages>
            <li>
                <capMods>
                    <li>
                        <capacity>Sight</capacity>
                        <offset>0.03</offset>
                    </li>
                </capMods>
            </li>
        </stages>
    </HediffDef>

    <ThingDef ParentName="BodyPartRefinedMechadendriteMakeableBase">
        <defName>Marak_RefinedOpticalMechadendrite</defName>
        <label>refined flashlight mechadendrite</label>
        <description>A refined mechadendrite with a flashlight built in to aid visibility. Its small and compact design limits the burden on the user at the cost of brightness.</description>
        <descriptionHyperlinks><RecipeDef>Marak_InstallRefinedOpticalMechadendrite</RecipeDef></descriptionHyperlinks>
        <costList>
            <Steel>30</Steel>
            <ComponentIndustrial>2</ComponentIndustrial>
        </costList>
        <recipeMaker>
            <researchPrerequisite>Marak_RefinedMultitoolMechadendrite</researchPrerequisite>
        </recipeMaker>
        <statBases>
            <Mass>1.5</Mass>
        </statBases>
        <techHediffsTags>
            <li>Simple</li>
        </techHediffsTags>
    </ThingDef>

    <RecipeDef ParentName="SurgeryInstallBodyPartRefinedMechadendriteBase">
        <defName>Marak_InstallRefinedOpticalMechadendrite</defName>
        <label>install refined flashlight mechadendrite</label>
        <description>Install a refined flashlight mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedOpticalMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedOpticalMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Installing refined flashlight mechadendrite.</jobString>
        <ingredients>
            <li>
                <filter>
                    <thingDefs>
                        <li>Marak_RefinedOpticalMechadendrite</li>
                    </thingDefs>
                </filter>
                <count>1</count>
            </li>
        </ingredients>
        <fixedIngredientFilter>
            <thingDefs>
                <li>Marak_RefinedOpticalMechadendrite</li>
            </thingDefs>
        </fixedIngredientFilter>
        <appliedOnFixedBodyParts>
            <li>Mechadendrite_Slot</li>
        </appliedOnFixedBodyParts>
        <addsHediff>Marak_RefinedOpticalMechadendrite</addsHediff>
        <researchPrerequisite>Marak_Mechadendrite_Gateway</researchPrerequisite>
    </RecipeDef>

    <RecipeDef ParentName="SurgeryRemoveImplantBase">
        <defName>Marak_RemoveRefinedOpticalMechadendrite</defName>
        <label>remove refined flashlight mechadendrite</label>
        <description>Remove a refined flashlight mechadendrite.</description>
        <descriptionHyperlinks>
            <ThingDef>Marak_RefinedOpticalMechadendrite</ThingDef>
            <HediffDef>Marak_RefinedOpticalMechadendrite</HediffDef>
        </descriptionHyperlinks>
        <jobString>Removing refined flashlight mechadendrite.</jobString>
        <removesHediff>Marak_RefinedOpticalMechadendrite</removesHediff>
    </RecipeDef>
    
</Defs>